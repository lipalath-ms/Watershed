from pprint import pprint
import requests
import json

def listOfWatersheds():
    count = 0
    name_list = []
    id_list = []

    url1 = requests.get('http://gstore.unm.edu/apps/rgis/search/datasets.json?version=3&offset=0&limit=20')
    data = url1.json()
    pprint(data)
    result = data['results']
    limit = data['subtotal']
    
    for rs1 in result:
        print rs1['description']

    for rs2 in result:
        name_list.append(rs2['description'])
        id_list.append(rs2['uuid'])

    name = raw_input("\n\nSelect a watershed: ")
    print "\n\nDatasets available for %s:\n" %name
    
    #get uuid of selected watershed
    while count <= limit:
        if name == name_list[count]:
            uid = id_list[count]
            break
        else:
            count += 1  

    url2 = requests.get('http://gstore.unm.edu/apps/rgis/datasets/%s/services.json' %uid) 
    print url2.url
    data = url2.text
    pprint(data)
    print "\n\n"
   

#print the list of all watersheds
print "\n\nList of all watersheds available:\n\n"
listOfWatersheds()





